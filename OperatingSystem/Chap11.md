## Chap11. CPU 스케줄링

### 11-1 CPU 스케줄링 개요
운영체제가 프로세스들에게 공정하고 합리적으로 CPU 자원을 배분하는 것 

<Br>

>**프로세스 우선순위**

- 대부분의 프로세스들은 CPU와 입출력장치를 모두 사용함
- 프로세스 종류마다 입출력 장치, CPU를 이용하는 시간에는 차이 존재 > 동일한 빈도로 CPU를 사용하면 비합리적
  - 입출력 집중 프로세스: 입출력 작업이 많은 프로세스
  - CPU 집중 프로세스: CPU 사용 작업이 많은 프로세스
- 상황/프로세스의 중요도에 맞게 CPU를 이용할 수 있도록 프로세스마다 우선순위 부여 (PCB에 명시)

<br>

>**스케줄링 큐**

- 다음 순서를 찾기 위해 프로세스를 하나하나 찾는 건 비효율적
- 스케줄링 큐에 줄을 서서 기다리도록 관리 <br><br>
  <img width="400" alt="Screenshot 2023-07-17 at 8 24 48 PM" src="https://github.com/Guel-git/iOS-CS-Study/assets/81340603/4519b00a-4db6-4f74-9ae7-1264bddfdac0">
  - 준비 큐: CPU를 이용하고 싶은 프로세스들이 서는 줄
  - 대기 큐: 입출력 장치를 이용하기 위해 대기 상태에 접어든 프로세스들이 서는 줄
- 줄에 관계 없이 우선 순위가 높은 프로세스가 먼저 처리될 수 있음
- 입출력 완료 > 완료 인터럽트 > 운영체제가 대기 큐에서 작업 완료된 PCB를 찾음 > 이 PCB를 준비 상태로 변경한 뒤 대기 큐에서 제거 > 해당 PCB 준비 큐로 이동

<br>

>**선점형과 비선점형 스케줄링**

- 선점형 스케줄링: 프로세스로부터 자원을 강제로 빼앗아 다른 프로세스에게 할당할 수 있는 방식
  - 어느 하나의 프로세스가 자원 사용을 독점할 수 없음
  - (+) 자원 독점을 막고 골고루 자원을 배분할 수 있음
  - (-) 문맥 교환 과정에서 오버헤드 발생 가능
- 비선점형 스케줄링: 하나의 프로세스가 자원을 사용하고 있다면 그 프로세스가 종료되거나 스스로 대기 상태에 접어들기 전에는 끼어들 수 없는 스케줄링 방식
  - 하나의 프로세스가 자원 사용을 독점할 수 있음
  - (+) 문맥 교환에서 발생하는 오버헤드는 적음
  - (-) 모든 프로세스가 골고루 자원을 사용할 수 없음


### 11-2 CPU 스케줄링 알고리즘

>**스케줄링 알고리즘의 종류**

**비선점형 스케줄링**
1. 선입 선처리 스케줄링 (FCFS 스케줄링)
   - 준비 큐에 삽입된 순서대로 프로세스 처리
   - 호위 효과: 모든 다른 프로세스들이 하나의 긴 프로세스가 CPU를 양도하기를 기다리는 현상
2. 최단작업 우선 스케줄링 (SJF 스케줄링)
   - 준비 큐에서 CPU 이용시간이 가장 짧은 프로세스부터 실행하는 스케줄링 방식

**선점형 스케줄링**
1. 라운드 로빈 스케줄링
   - 정해진 타임 슬라이스만큼의 시간 동안 돌아가며 CPU 사용
   - 타임 슬라이스: 각 프로세스가 CPU를 사용할 수 있는 정해진 시간 > 크기 중요
2. 최소 잔여 시간 우선 스케줄링 (SRT 스케줄링)
   - 정해진 타임 슬라이스만큼 CPU를 사용하되, 다음 프로세스는 남은 작업 시간이 가장 적은 프로세스로 선택
3. 우선순위 스케줄링
   - 가장 높은 우선순위 프로세스부터 실행하는 스케줄링 방식
   - 기아 현상(Starvation) 발생 가능 > 오래 대기한 프로세스의 우선순위를 높이는 에이징(aging) 기법으로 방지
4. 다단계 큐 스케줄링
   - 우선순위별로 준비 큐를 여러 개 사용하는 스케줄링 방식
   - 우선순위 스케줄링의 발전된 형태
   - 큐마다 다른 스케줄링 알고리즘을 사용할 수도 있음
   
     <img width="459" alt="스크린샷 2023-07-18 오전 11 20 03" src="https://github.com/Guel-git/iOS-CS-Study/assets/81340603/d8fc05ed-3f50-4329-b2e2-ff4ad586c9c5">

5. 다단계 피드백 큐 스케줄링
  - 프로세스들이 서로 다른 준비 큐 사이를 이동할 수 있는 다단계 큐 스케줄링 방식
  - 다단계 큐 스케줄링의 발전된 형태
  - CPU 사용이 많은 프로세스의 우선순위를 낮추고 우선순위가 계속 낮은 프로세스의 우선순위를 높여줌 > 기아 현상 예방
  - 가장 일반적인 CPU 스케줄링 알고리즘
