## Chap8. 입출력장치

### 8-1 장치 컨트롤러와 장치 드라이버

<br>

>**장치 컨트롤러**

- 입출력장치의 까다로움
    1. 종류가 다양함 > 속도, 데이터 전송 형식도 다양함 > 규격화의 어려움
    2. 데이터 전송률이 낮음 > 어떤 건 높음 > 역시 규격화의 어려움

- 장치 컨트롤러 <br>
    : 입출력장치와 컴퓨터 내부 사이에서 정보를 전달하는 역할 <br>
    : 오류를 검출 <br> 
    : 데이터 버퍼링 - 버퍼에 데이터를 모은 후 한꺼번에 보내는 방법 혹은 데이터를 한번에 받아 조금씩 내보내는 방법, 전송률 차이 해결

<img>

- 장치 컨트롤러의 구조 <br>
    : 데이터 레지스터 - CPU와 입출력 장치 사이에 주고받을 데이터가 담기는 레지스터, 버퍼 역할 <br>
    : 상태 레지스터 - 입출력 장치가 입출력 작업을 할 준비가 되었는지, 작업이 완료되었는지, 오류가 없는지 등의 상태 정보<br>
    : 제어 레지스터 - 입출력 장치가 수행할 내용에 대한 정보와 명령 <br>

>**장치 드라이버** 

- 장치 컨트롤러의 동작을 감지 및 제어 
- 장치 컨트롤러가 컴퓨터 내부와 정보를 주고 받을 수 있게 하는 프로그램
- 새로운 장치 연결시 장치 드라이버 설치 필요
- 메모리에 존재

### 8-2 다양한 입출력 방법

>**프로그램 입출력**
프로그램 속 명령어로 입출력 장치를 제어하는 방법

1. 하드 디스크에 새로운 정보를 쓴다 > CPU는 하드 디스크 컨트롤러의 제어 레지스터에 쓰기 명령을 전달
2. 하드 디스크 컨트롤러는 하드 디스크 상태 확인 > 준비된 상태라면 하드 디스크 컨트롤러는 상태 레지스터에 준비되었다는 표시 작성
3. CPU는 상태 레지스터를 주기적으로 확인 > 준비되면 백업할 메모리의 정보를 데이터 레지스터에 작성

**CPU는 모든 장치 컨트롤러의 레지스터 값을 어떻게 알까?**

- 메모리 맵 입출력 <br>
    메모리에 접근하기 위한 주소 공간과 입출력 장치에 접근하기 위한 주소 공간을 하나의 주소 공간으로 간주 <br>
    각 번지마다 입출력 장치의 레지스터 값을 저장 <br>
    일반 메모리 주소 접근법과 동일

- 고립형 입출력 <br>
    메모리를 위한 주소 공간과 입출력 장치를 위한 주소 공간을 분리하는 방법

>**인터럽트 기반 입출력**

입출력 장치에 의한 하드웨어 인터럽트는 장치 컨트롤러에 의해 발생함 > 인터럽트를 기반으로 하는 입출력을 의미함 <br> <br>
인터럽트가 많이 발생하면 ? 순차적 처리, 우선순위가 높은 인터럽트 우선 <br>
프로그래머블 인터럽트 컨트롤러를 사용하여 우선순위를 반영한 다중 인터럽트를 처리

>**DMA 입출력**

입출력 장치와 메모리가 CPU를 거치지 않고 상호작용할 수 있는 입출력 방식, 메모리에 직접 접근할 수 있는 입출력 기능

- DMA 컨트롤러 <br> 
DMA 입출력을 위한 하드웨어 <br> 
CPU로부터 명령을 전달받고 입출력 장치와 작업 후 인터럽트 전달 <br>
시스템 버스는 공용 자원 > CPU가 사용하지 않을 때 사용 혹은 CPU에게 허락 구한 후 이용 <br>
혹은 입출력 버스라는 별도의 버스 추가

