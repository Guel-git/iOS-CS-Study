## Chap6. 메모리와 캐시 메모리

### 6-1. RAM의 특징과 종류

>**RAM의 특징**

- RAM에는 실행할 프로그램의 명령어와 데이터가 저장됨
- 전원을 끄면 저장된 내용이 사라짐 - 휘발성 저장 장치
  - RAM > 실행할 대상을 저장
- 전원이 꺼져도 저장된 내용이 유지되는 저장 장치 - 비휘발성 저장 장치
  - 하드 디스크, SSD 등 보조기억장치 > CPU에 접근 X > 보관할 대상 저장

<br>

>**RAM의 용량과 성능**

- RAM 용량 ⬇️ > 보조기억장치에서 실행할 프로그램을 가져오는 일 ⬆️ > 실행 시간 ⬆️
- RAM 용량이 크면 많은 프로그램들을 동시에 실행하는 데 유리
- 필요 이상으로 커졌을 때 속도가 그에 비례 하는 건 X

<br>

>**RAM의 종류**

**DRAM**

- Dynamic RAM, 저장된 데이터가 동적으로 변하는 RAM
- 시간이 지나면 저장된 데이터 자동 소멸
- 데이터 소멸을 막기 위해 주기적으로 데이터 재활성화 필요
- 소비 전력이 낮고 저렴하며 집적도가 높음 > 대용량 설계 용이

**SRAM**

- Static RAM, 저장된 데이터가 변하지 않는 RAM (휘발성이긴 함)
- DRAM보다 속도가 빠르며, 재활성화 필요 없음
- 소비 전력이 크고 비싸며 집적도가 낮음 > 저용량/빠른 속도 장치 (ex. 캐시 메모리)

**SDRAM**

- Synchronous Dynamic RAM, 클럭 신호에 맞춰 동작하여 CPU 정보를 주고받음
- 발전된 형태의 DRAM

**DDR SDRAM**

- Double Data Rate SDRAM, 대역폭을 넓혀 속도를 빠르게 만든 SDRAM
- 1 클럭당 2 번씩 CPU와 데이터 주고받을 수 있음 > 전송 속도 2배 ⬆️
- DDR2 SDRAM은 4배, DDR3 SDRAM은 8배, DDR4 SDRAM은 16배

<br>

### 6-2. 메모리의 주소 공간

>**물리 주소와 논리 주소**

<img width="544" alt="Screenshot 2023-07-13 at 11 46 10 PM" src="https://github.com/Guel-git/iOS-CS-Study/assets/81340603/0bbde75b-6d43-4534-add3-11d03be7e832">

- 물리 주소: 메모리 하드웨어가 사용하는 주소
- 논리 주소: CPU와 실행 중인 프로그램이 사용하는 프로그램 각각에 부여된 논리 주소

<img width="536" alt="Screenshot 2023-07-13 at 11 49 26 PM" src="https://github.com/Guel-git/iOS-CS-Study/assets/81340603/3a83587a-bbc0-4d83-a147-c51b412d9d5f">

- CPU와 메모리가 상호작용 하려면 논리 주소와 물리 주소 간의 변환이 이루어져야 함
- 메모리 관리 장치 (MMU) 라는 하드웨어에 의해 수행됨
- 베이스 레지스터는 프로그램의 첫 물리주소를 저장, 논리 주소는 프로그램의 시작점으로부터 떨어진 정도

<br>

>**메모리 보호 기법**

- 다른 프로그램의 영역을 침범할 수 있는 명령어는 위험
- 논리 주소 범위를 벗어나는 명령어 실행 방지, 실행 중인 프로그램이 다른 프로그램에 영향 받지 않도록
- 한계 레지스터: 논리 주소의 최대 크기 저장, 그보다 큰 논리 주소에 접근시 인터럽트(트랩) 발생

<br>

### 6-3. 캐시 메모리

CPU가 메모리에 접근하는 시간이 CPU의 연산 속도보다 느림을 극복하기 위한 저장 장치

>**저장 장치 계층 구조**

<img width="390" alt="Screenshot 2023-07-14 at 12 06 37 AM" src="https://github.com/Guel-git/iOS-CS-Study/assets/81340603/f05cd13b-4491-4471-9acd-fa9ac9c89b62">

- CPU에 얼마나 가까운가를 기준으로

<br>

>**캐시 메모리**

- CPU가 메모리에 접근하는 속도 << 레지스터에 접근하는 속도 인데, 접근할 일 ⬆️ > 이를 보완하기 위해 등장
- CPU와 메모리 사이에 위치한 레지스터보다 용량 ⬆️, 속도 ⬆️
- SRAM 기반의 저장 장치

- 캐시 메모리 계층: L1, L2, L3
  
  <img width="531" alt="Screenshot 2023-07-14 at 12 10 56 AM" src="https://github.com/Guel-git/iOS-CS-Study/assets/81340603/f465bc85-5447-4cfa-881c-ce6aba0ea252">
- 멀티 코어 프로세서 > L1, L2는 코어마다 고유한 캐시 메모리로, L3는 여러 코어가 공유하는 형태

<br>

>**참조 지역성 원리**

- 캐시 메모리는 CPU가 사용할 법한 대상을 예측하여 저장
  - 캐시 히트: 예측한 데이터가 실제로 들어맞는 경우
  - 캐시 미스: 예측이 틀려 메모리에서 필요한 데이터를 직접 가져오는 경우
  - 캐시 적중률: 캐시 히트 횟수 / (캐시 히트 횟수 + 캐시 미스 횟수)

- 참조 지역성의 원리
  1. CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다 > 시간 지역성
  2. CPU는 접근한 메모리 공간 근처를 접근하려는 경향이 있다 > 공간 지역성
